<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Week 7 Lecture Notes, FEWD 46</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/all.css" media="all" charset="utf-8">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="../../js/lectures.js"></script>
  </head>
  <body>
    <nav><script>$("nav").load("../../partials/navigation.html");</script></nav>

    <main class="container">
      <h1>Week 7</h1>

      <h3>Table of Contents</h3>

      <ol>
        <li><a href="#anon-fn">Anonymous Functions</a></li>
        <li><a href="#geolocation">Geolocation</a></li>
        <li><a href="#local-storage">Local Storage</a></li>
      </ol>

      <h3>Resources</h3>

      <ol>
        <li><a href="http://staticmapmaker.com/yandex/">Static Map Maker for Yandex</a></li>
      </ol>

      <h2 id="anon-fn">Anonymous Functions</h2>

      <p>
        Coming soon.
      </p>

      <h2 id="geolocation">Geolocation</h2>

      <p>
        Let's say you want to customize the content on your website to your customer's location. Your browser knows how to do that!
      </p>

      <p>
        Access the geolocation object like so: <code>navigator.geolocation</code>.
      </p>

      <p>
        When you ask for the browser's current location:
      </p>

      <ul>
        <li>Getting the location takes time</li>
        <li>When the location is determined, the browser calls a function and passes it a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Position" target="_blank">position object</a></li>
      </ul>

      <p>
        Here's how you can ask the browser for the current location and access the latitude/longitude:
      </p>

      <script src="https://gist.github.com/avand/adc3eead8215d440eea8c80074ccf8a0.js"></script>

      <p>
        Once you have the latitude and longitude, you can do all kinds of stuff. You could pass the information onto a map, for example. Let's do a really simple case, where we just load an image, using the latitude and longitude. We need to use a service that will let us load a map with just a URL.
      </p>

      <p>
        Here's an example:
      </p>

      <p>
        <code>http://static-maps.yandex.ru/1.x/?lang=en-US&ll=-73.7638,42.6564&z=13&l=map&size=600,300</code>
      </p>

      <p>
        <img src="http://static-maps.yandex.ru/1.x/?lang=en-US&ll=-73.7638,42.6564&z=13&l=map&size=600,300" class="img-response" />
      </p>

      <p>
        See how the latitude and longitude are encoded in the URL? <code>ll=-73.7638,42.6564</code>
      </p>

      <div class="you-do">
        <p>
          Now, let's put it all together to get the current location from the browser, construct that URL, and set it as the <code>src</code> of an image on the page.
        </p>

        <p>
          <img src="images/geolocation.gif" class="img-responsive">
        </p>

        <p>
          The only gotcha with this exercise is that up until right now, we've been serving files with right off the file system. Notice, that in your URL bar all the pages start with <code>file://</code>. For security reasons, Chrome won't provide your location over this protocol. It has to be over <code>http://</code>. So we need to run a web server on your computer.
        </p>

        <p>
          To launch a server, open Terminal (Applications > Utilities or Spotlight > Terminal). Then go to the directory where your project lives. The command to change directory is <code>cd</code>. So if you your project lives in <code>Code/fewd</code> then type <code>cd Code/fewd</code> (and press return). Type <code>ls</code> (and hit enter) to list the files in the current directory to confirm you're in the right place. If you are, then type <code>python -m SimpleHTTPServer</code>. That will launch a web server out of that directory. Now, you can open up <code>http://localhost:8000</code> and you should see your profile page. Navigate to this exercise from there.
        </p>
      </div>

      <h2 id="local-storage">Local Storage</h2>

      <p>
        Your browser can save data that is available across refreshes and even reboots. It's actually saved on disk and available so long as the user doesn't clear or reset their browser.
      </p>

      <p>
        The interface to local storage is actually very simple:
      </p>

      <script src="https://gist.github.com/avand/fa80ff8caf5add682e7b2cdbbb69bfa9.js"></script>

      <p>
        Notice that the keys, which you use to save and recall information are strings. The values that you save into local storage are strings too.
      </p>

      <p>
        You can use local storage to save pretty much anything that can be saved as a string.
      </p>

      <h3>Saving HTML</h3>

      <p>
        Sometimes it makes sense to simply take some portion of HTML from the page and store it into local storage. When the user comes back later you can recreate that part of the page. In this way, you don't have to worry about the underlying data or how the HTML came to be. You just take an entire part of the page and store the raw HTML for it in local storage as a string.
      </p>

      <p>
        Let's use the todo list as an example:
      </p>

      <script src="https://gist.github.com/avand/c2ea0242f358c59f0a15bdf75df14131.js"></script>

      <!--
      <h3>Saving Data</h3>

      <p>
        You could also use HTML to save data. For example, you might want to save the results of an API call so you don't have to make it again. You might want to do this for speed reasons. Or, you might have a limit on the number of API calls you can make and want to <em class="vocab">cache</em> the results for later. A cache is simply a storage mechanism that stands between you and the actual data. Before you make a call, you check your cache, if it "hits" you get the data form the cache. If it "misses," you go to the data source and update your cache.
      </p>

      <p>
        This might be useful on the movie search assignment:
      </p>
      -->
    </main>

    <script src="../../../js/tracking.js"></script>
  </body>
</html>
