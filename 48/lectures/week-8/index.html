<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Week 8 Lecture Notes, FEWD 48</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../css/all.css" media="all" charset="utf-8">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="../../js/lectures.js"></script>
  </head>
  <body>
    <nav><script>$("nav").load("../../partials/navigation.html");</script></nav>

    <main class="container">
      <h1>Week 8</h1>

      <h2>Table of Contents</h2>

      <ol>
        <li><a href="#local-storage">Local Storage</a></li>
      </ol>

      <h2>Resources</h2>

      <ol>
        <li><a href="https://docs.google.com/a/avandamiri.com/forms/d/1--j3bVLBJy9xO9eH1p6-gj9c97pfHFwcPe_IlcmElM8/edit?usp=drive_web" target="_blank">Exit Tickets</a></li>
      </ol>

      <h2 id="local-storage">Local Storage</h2>

      <p>
        Your browser can save data that is available across refreshes and even reboots. It's actually saved on disk and available so long as the user doesn't clear or reset their browser.
      </p>

      <p>
        The interface to local storage is actually very simple:
      </p>

      <script src="https://gist.github.com/avand/fa80ff8caf5add682e7b2cdbbb69bfa9.js"></script>

      <p>
        Notice that the keys, which you use to save and recall information are strings. The values that you save into local storage are strings too.
      </p>

      <p>
        You can use local storage to save pretty much anything that can be saved as a string.
      </p>

      <h3>Saving HTML</h3>

      <p>
        Sometimes it makes sense to simply take some portion of HTML from the page and store it into local storage. When the user comes back later you can recreate that part of the page. In this way, you don't have to worry about the underlying data or how the HTML came to be. You just take an entire part of the page and store the raw HTML for it in local storage as a string.
      </p>

      <p>
        Let's use the todo list as an example:
      </p>

      <script src="https://gist.github.com/avand/c2ea0242f358c59f0a15bdf75df14131.js"></script>

      <h3>Saving Data</h3>

      <p>
        You could also use HTML to save data. For example, you might want to save the results of an API call so you don't have to make it again. You might want to do this for speed reasons. Or, you might have a limit on the number of API calls you can make and want to <em class="vocab">cache</em> the results for later. A cache is simply a storage mechanism that stands between you and the actual data. Before you make a call, you check your cache, if it "hits" you get the data form the cache. If it "misses," you go to the data source and update your cache.
      </p>

      <p>
        This might be useful on the movie search assignment:
      </p>

      <script src="https://gist.github.com/avand/872ab2ed179dfde06779971fc53565a3.js"></script>

      <p>
        Notice that when the results are retrieved inside of <code>$.get()</code>, we first save them to local storage (line 21). We use the URL as the key and the value is the entire response as a JSON string. Remember, jQuery automatically parses the JSON response from the server, so we're actually converting it back to a string just for local storage.
      </p>

      <p>
        Now notice the conditional. The first thing we do when the form is submitted is generate the URL. Then we check local storage to see if there's an item using the URL as the key. <code>if</code> there's nothing, then <code>cache</code> will be <code>null</code> and we'll go call <code>$.get()</code>. But, if something is found, then we'll go down a different path, parsing the JSON string stored in local storage and then iterating on the results.
      </p>
    </main>

    <script src="../../../js/tracking.js"></script>
  </body>
</html>
